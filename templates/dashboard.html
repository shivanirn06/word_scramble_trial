<!DOCTYPE html>
<html>
<head>
<title>Dashboard - WordScramble</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    background: #0f172a;
    color: white;
    min-height: 100vh;
    padding: 40px;
}

/* HEADER */

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
}

.header h1 {
    font-size: 28px;
}

.logout {
    background: #1e293b;
    padding: 10px 18px;
    border-radius: 8px;
    text-decoration: none;
    color: white;
    transition: 0.3s;
}

.logout:hover {
    background: #ef4444;
}

/* STATS CARDS */

.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
}

.card {
    background: linear-gradient(145deg, #1e293b, #0f172a);
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    transition: 0.3s ease;
    animation: fadeUp 0.6s ease forwards;
    opacity: 0;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(99,102,241,0.4);
}

.card h2 {
    font-size: 32px;
    margin-top: 10px;
    color: #6366f1;
}

/* ACTION BUTTONS */

.actions {
    display: flex;
    gap: 20px;
    margin-bottom: 40px;
}

.btn {
    flex: 1;
    padding: 18px;
    text-align: center;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 600;
    transition: 0.3s;
}

.btn-play {
    background: #6366f1;
    color: white;
}

.btn-play:hover {
    background: #4f46e5;
    transform: scale(1.05);
}

.btn-daily {
    background: #22c55e;
    color: white;
}

.btn-daily:hover {
    background: #16a34a;
    transform: scale(1.05);
}

/* HISTORY TABLE */

.history {
    background: #1e293b;
    padding: 25px;
    border-radius: 16px;
    animation: fadeUp 0.8s ease forwards;
    opacity: 0;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

th, td {
    padding: 12px;
    text-align: center;
}

th {
    background: #334155;
}

tr:nth-child(even) {
    background: #0f172a;
}

.win {
    color: #22c55e;
    font-weight: 600;
}

.lose {
    color: #ef4444;
    font-weight: 600;
}

/* ANIMATION */

@keyframes fadeUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}
</style>
</head>

<body>

<div class="header">
    <h1>üéÆ Welcome, {{user}}</h1>
    <a href="/logout" class="logout">Logout</a>
</div>

<div class="stats">
    <div class="card">
        <p>Total Score</p>
        <h2>{{total_score}}</h2>
    </div>

    <div class="card">
        <p>Games Played</p>
        <h2>{{history|length}}</h2>
    </div>

    <div class="card">
        <p>Wins</p>
        <h2>
            {% set wins = history | selectattr(3, 'equalto', 'Win') | list %}
            {{ wins|length }}
        </h2>
    </div>
</div>

<div class="actions">
    <a href="/game" class="btn btn-play">‚ñ∂ Play Game</a>
    <a href="/daily" class="btn btn-daily">‚≠ê Daily Challenge</a>
</div>

<div class="history">
    <h2>Game History</h2>

    <table>
        <tr>
            <th>Word</th>
            <th>Result</th>
            <th>Score</th>
            <th>Date</th>
        </tr>

        {% for g in history %}
        <tr>
            <td>{{g[2]}}</td>
            <td class="{{g[3]|lower}}">{{g[3]}}</td>
            <td>{{g[4]}}</td>
            <td>{{g[5]}}</td>
        </tr>
        {% endfor %}
    </table>
</div>

</body>
</html>